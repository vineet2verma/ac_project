<!-- ================= ADD INVENTORY MODAL ================= -->
<div class="modal fade" id="inventoryModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-md">

        <form method="POST"
              action="{% url 'cnc_work_app:order_inventory_add' order.id %}"
              class="modal-content">

            {% csrf_token %}
            <!-- HEADER -->
            <div class="modal-header bg-success text-white">
                <h6 class="modal-title">Add Inventory</h6>
                <button type="button"
                        class="btn-close btn-close-white"
                        data-bs-dismiss="modal"></button>
            </div>

            <!-- BODY -->
            <div class="modal-body">

                <!-- INVENTORY ITEM -->
                <div class="mb-2">
                    <label class="form-label fw-semibold">Inventory Item</label>

                    <!-- SEARCH -->
                    <input type="text"
                           id="inventorySearch"
                           class="form-control form-control-sm mb-1"
                           placeholder="Search inventory item...">

                    <!-- DROPDOWN -->
                    <select name="inventory_id"
                            id="inventory_id"
                            class="form-select form-select-sm"
                            required>
                        <option value="">-- Select Item --</option>
                        {% for i in inventory_items %}
                        <option value="{{ i.id }}"
                                data-stock="{{ i.current_qty }}"
                                data-name="{{ i.item_name|lower }}">
                            {{ i.item_name }} (Stock: {{ i.current_qty }})
                        </option>
                        {% endfor %}
                    </select>
                </div>

                <!-- AVAILABLE STOCK -->
                <div class="mb-2">
                    <label class="form-label fw-semibold">Available Stock</label>
                    <input id="available_stock"
                           class="form-control form-control-sm bg-light"
                           readonly>
                </div>

                <!-- CONSUME QTY -->
                <div class="mb-2">
                    <label class="form-label fw-semibold">Consume Quantity</label>
                    <input type="number"
                           step="0.01"
                           name="qty"
                           id="consume_qty"
                           class="form-control form-control-sm"
                           required>

                    <small id="stockAlert"
                           class="text-danger d-none">
                        Quantity exceeds available stock
                    </small>
                </div>

            </div>

            <!-- FOOTER -->
            <div class="modal-footer">
                <button id="saveBtn"
                        class="btn btn-success btn-sm w-100">
                    <i class="bi bi-plus-circle"></i> Add Inventory
                </button>
            </div>

        </form>
    </div>
</div>