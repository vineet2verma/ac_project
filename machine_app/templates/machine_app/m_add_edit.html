<div class="modal fade" id="machineModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-md">
        <form method="POST"
              action="{% url 'machine_app:add_machine_work' order.id %}"
              class="modal-content shadow-sm border-0 rounded-3">
            
            {% csrf_token %}
            
            <!-- üîê hidden id (for EDIT) -->
            <input type="hidden" name="machine_work_id" id="machine_work_id">
            
            <!-- ================= HEADER ================= -->
            <div class="modal-header bg-light">
                <h6 class="modal-title fw-semibold" id="machineModalTitle">
                    üõ†Ô∏è Add Machine Work
                </h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            
            <!-- ================= BODY ================= -->
            <div class="modal-body">
                
                <!-- Machine -->
                <div class="mb-3">
                    <label class="form-label small fw-semibold">
                        Machine <span class="text-danger">*</span>
                    </label>
                    <select name="machine_id"
                        id="machine_id"
                        class="form-select form-select-sm"
                        required>
                        <option value="">Select Machine</option>
                        {% for m in machines_mast %}
                        <option value="{{ m.id }}">{{ m.machine_name }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <!-- Machine Type -->
                <div class="mb-3">
                    <label class="form-label small fw-semibold">
                        Type <span class="text-danger">*</span>
                    </label>
                    <select name="work_type"
                            id="id_work_type"
                            class="form-select form-select-sm"
                            required>
                        <option value="ONTIME" selected>Ontime</option>
                        <option value="DOWNTIME">Downtime</option>
                    </select>
                </div>
                
                <!-- Date + Hours -->
                <div class="row g-2">
                    <div class="col-6">
                        <label class="form-label small fw-semibold">Date</label>
                        <input type="date"
                               name="machine_date"
                               class="form-control form-control-sm"
                               value="{{ today|default:'' }}">
                    </div>
                    
                    <div class="col-6">
                        <label class="form-label small fw-semibold">
                            Working Hours <span class="text-danger">*</span>
                        </label>
                        <input type="number"
                               step="0.25"
                               name="working_hour"
                               id="id_working_hour"
                               class="form-control form-control-sm"
                               placeholder="e.g. 2.5"
                               required>
                    </div>
                </div>
                
                <!-- Operator -->
                <div class="mt-3">
                    <label class="form-label small fw-semibold">Operator Name</label>
                    <input type="text"
                           name="operator"
                           id="id_operator"
                           class="form-control form-control-sm"
                           placeholder="Operator / Staff name">
                </div>
                
                <!-- Remarks -->
                <div class="mt-3">
                    <label class="form-label small fw-semibold">Remarks</label>
                    <textarea name="remarks"
                              id="id_remarks"
                              class="form-control form-control-sm"
                              rows="2"
                              placeholder="Any notes or observations"></textarea>
                </div>
            
            </div>
            
            <!-- ================= FOOTER ================= -->
            <div class="modal-footer bg-light">
                <button type="button"
                        class="btn btn-outline-secondary btn-sm"
                        data-bs-dismiss="modal">
                    Cancel
                </button>
                <button type="submit"
                        class="btn btn-success btn-sm px-4">
                    üíæ Save
                </button>
            </div>
        
        </form>
    </div>
</div>
